version: 2

models:
  - name: dbt_run_results
    description: >
      Run results of dbt invocations, inserted at the end of each invocation.
      Each row is the invocation result of a single resource (model, test, snapshot, etc).
      New data is loaded to this model on an on-run-end hook named 'elementary.upload_run_results' from each invocation that produces a result object
      This is an incremental model.
    columns:
      - name: model_execution_id
        data_type: string
        description: Execution id generated by joining the unique_id of the resource and the invocation_id. This is the unique key of each row in this model.

      - name: unique_id
        data_type: string
        description: The unique id of the resource (would be similar for all executions of the same resource).

      - name: invocation_id
        data_type: string
        description: The unique id of the invocation (would be similar for all resources executed on the same invocation).

      - name: generated_at
        data_type: string
        description: ""

      - name: name
        data_type: string
        description: Resource name.

      - name: message
        data_type: string
        description: Execution results message returned by dbt.

      - name: status
        data_type: string
        description: Execution result status (success, error, pass, fail)

      - name: resource_type
        data_type: string
        description: Resource type (model, test, snapshot, seed, etc)

      - name: execution_time
        data_type: float
        description: Resource execution duration in seconds.

      - name: execute_started_at
        data_type: string
        description: Start time of the execution.

      - name: execute_completed_at
        data_type: string
        description: End time of the execution.

      - name: compile_started_at
        data_type: string
        description: Start time of resource compile action.

      - name: compile_completed_at
        data_type: string
        description: End time of resource compile action.

      - name: rows_affected
        data_type: int
        description: ""

      - name: full_refresh
        data_type: boolean
        description: Was this a full refresh execution.

      - name: compiled_sql
        data_type: string
        description: The compiled SQL executed against the database.

  - name: dbt_models
    description: >
      Metadata about models in the project, including configuration and properties from the dbt graph. Each row contains information about a single model.
      Data is loaded every time this model is executed. It is recommended to execute the model every time a change is merged to the project.
    columns:
      - name: unique_id
        data_type: string
        description: The unique id of the model.

      - name: alias
        data_type: string
        description: ""

      - name: checksum
        data_type: string
        description: Model file checksum.

      - name: materialization
        data_type: string
        description: The model materialization config.

      - name: tags
        data_type: string
        description: Model tags property.

      - name: meta
        data_type: string
        description: The content of 'meta' property key.

      - name: owner
        data_type: string
        description: Model owner property (configured under 'meta' key).

      - name: database_name
        data_type: string
        description: The model database name.

      - name: schema_name
        data_type: string
        description: The model schema name.

      - name: depends_on_macros
        data_type: string
        description: The macros the model directly depends on.

      - name: depends_on_nodes
        data_type: string
        description: The nodes the model directly depends on.

      - name: description
        data_type: string
        description: Model description.

      - name: name
        data_type: string
        description: Model name.

      - name: package_name
        data_type: string
        description: Package name of the model.

      - name: original_path
        data_type: string
        description: Full path of the model file.

      - name: path
        data_type: string
        description: Short path of the model file.

      - name: generated_at
        data_type: string
        description: Update time of the table.

  - name: dbt_tests
    description:  >
      Metadata about tests in the project, including configuration and properties from the dbt graph. Each row contains information about a single test.
      Data is loaded every time this model is executed. It is recommended to execute the model every time a change is merged to the project.
    columns:
      - name: unique_id
        data_type: string
        description: The unique id of the test.

      - name: database_name
        data_type: string
        description: The tested model database name.

      - name: schema_name
        data_type: string
        description: The tested model schema name.

      - name: name
        data_type: string
        description: The test name.

      - name: short_name
        data_type: string
        description: ""

      - name: alias
        data_type: string
        description: ""

      - name: test_column_name
        data_type: string
        description: The name of the tested column.

      - name: severity
        data_type: string
        description: ""

      - name: warn_if
        data_type: string
        description: ""

      - name: error_if
        data_type: string
        description: ""

      - name: test_params
        data_type: string
        description: ""

      - name: test_namespace
        data_type: string
        description: ""

      - name: tags
        data_type: string
        description: ""

      - name: model_tags
        data_type: string
        description: ""

      - name: model_owners
        data_type: string
        description: ""

      - name: meta
        data_type: string
        description: ""

      - name: depends_on_macros
        data_type: string
        description: ""

      - name: depends_on_nodes
        data_type: string
        description: ""

      - name: parent_model_unique_id
        data_type: string
        description: ""

      - name: description
        data_type: string
        description: ""

      - name: package_name
        data_type: string
        description: ""

      - name: type
        data_type: string
        description: ""

      - name: original_path
        data_type: string
        description: ""

      - name: compiled_sql
        data_type: string
        description: ""

      - name: path
        data_type: string
        description: ""

      - name: generated_at
        data_type: string
        description: ""